import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.control.TextField;

public class UnitConverterController {

    @FXML
    private Button converterButton;

    @FXML
    private TextField englishMetricTextField;

    @FXML
    private TextField lengthTextField;

    @FXML
    private TextField resultTextField;

    @FXML
    private TextField speedTextField;

    @FXML
    private TextField tempTextField;

    @FXML
    private TextField weightTextField;

    @FXML
    public void initialize() {
        converterButton.setOnAction(event -> convertUnits());
    }

    private void convertUnits() {
        String mode = englishMetricTextField.getText().trim().toLowerCase();

        double speed = parseDoubleOrZero(speedTextField.getText());
        double temp = parseDoubleOrZero(tempTextField.getText());
        double weight = parseDoubleOrZero(weightTextField.getText());
        double length = parseDoubleOrZero(lengthTextField.getText());

        StringBuilder result = new StringBuilder();

        switch (mode) {
            case "metric":
                // Convert from metric → english
                if (!speedTextField.getText().isEmpty()) {
                    double mph = speed * 0.621371;
                    result.append(String.format("Speed: %.2f mph ", mph));
                }
                if (!tempTextField.getText().isEmpty()) {
                    double fahrenheit = (temp * 9 / 5) + 32;
                    result.append(String.format("Temp: %.2f °F ", fahrenheit));
                }
                if (!weightTextField.getText().isEmpty()) {
                    double pounds = weight * 2.20462;
                    result.append(String.format("Weight: %.2f lb ", pounds));
                }
                if (!lengthTextField.getText().isEmpty()) {
                    double miles = length * 0.621371;
                    result.append(String.format("Length: %.2f mi ", miles));
                }
                break;

            case "english":
                // Convert from english → metric
                if (!speedTextField.getText().isEmpty()) {
                    double kph = speed / 0.621371;
                    result.append(String.format("Speed: %.2f km/h ", kph));
                }
                if (!tempTextField.getText().isEmpty()) {
                    double celsius = (temp - 32) * 5 / 9;
                    result.append(String.format("Temp: %.2f °C ", celsius));
                }
                if (!weightTextField.getText().isEmpty()) {
                    double kilograms = weight / 2.20462;
                    result.append(String.format("Weight: %.2f kg ", kilograms));
                }
                if (!lengthTextField.getText().isEmpty()) {
                    double kilometers = length / 0.621371;
                    result.append(String.format("Length: %.2f km ", kilometers));
                }
                break;

            default:
                resultTextField.setText("Enter 'english' or 'metric' first!");
                return;
        }

        if (result.length() == 0) {
            resultTextField.setText("Enter a value to convert.");
        } else {
            resultTextField.setText(result.toString().trim());
        }
    }

    private double parseDoubleOrZero(String text) {
        try {
            return Double.parseDouble(text);
        } catch (NumberFormatException e) {
            return 0;
        }
    }
}
